<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/sessao.js"></script>
</head>

<body onload="listar()">
    <header>
        <nav id="navbar">
            <div class="left">
                <div class="logo">
                    <a href=""><img src="../assets/imgs/logo.png" alt="Logo"></a>
                </div>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                </ul>
                <ul>
                    <li><a href="../quiz/quizKanye.html">Quiz</a></li>
                </ul>
                <ul>
                    <li><a href="../gameMusica/musicGame.html">Jogo</a></li>
                </ul>
            </div>
            </div>
            <div class="right">
                <ul>
                    <li>
                        <div id="direita">
                            <p>Nome Usuario</p>
                        </div>
                    </li>
                    <li>
                        <a href="../index.html" onclick="sair()">
                            <p>Sair</p>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="boxGraphs">
        <div class="titulo">
            <h1>Dashboard</h1>
        </div>
        <div class="box">

        </div>
    </div>
    <div class="boxKpi">
        <div class="rankingJogo">
            <div class="leaderboard">
                <div class="pontuacao">
                    <div class="nome">
                        <p>nome</p>
                    </div>
                    <div class="acertos">
                        <p>acertos</p>
                    </div>
                    <div class="erros">
                        <p>erros</p>
                    </div>
                </div>         
                <div class="jogador" id="jogadores">
                    
                </div>
            </div>
        </div>
    </div>
    </div>
    
</body>
<script>

    function verificar() {
        var idUsuario = sessionStorage.ID_USUARIO;
        var nomeUsuario = sessionStorage.NOME_USUARIO;

        if (idUsuario >= 0) {
            direita.innerHTML = `<ul><li><p>${nomeUsuario}</p></li></ul>`
        } else {
            window.location = '../index.html'
        }
    }
    verificar()

    function sair() {
        sessionStorage.clear();
    }

    function listar() {
    fetch(`/quiz/listar`, {
        method: "GET",
    })
        .then(function (resposta) {
            resposta.json().then((resposta) => {
                resposta.forEach((jogador) => {
                    jogadores.innerHTML += `<div class="pontuacao"><div class="nome"><p>${jogador.nomeUsuario}</p></div><div class="acertos"><p>${jogador.acertos}</p></div><div class="erros"><p>${jogador.erros}</p></div></div>`;
                });
            });
        })
        .catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
        });
}

</script>

</html>